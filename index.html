<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>SimuSimu - v1.0</title>
    <link rel="stylesheet" href="style.css">
    <!-- Importação da biblioteca de gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="theme-dark">

<!-- TELA 1: MENU PRINCIPAL -->
<div id="main-menu-container" class="panel">
    <h1 class="game-title">SimuSimu</h1>
    <p class="game-subtitle">Um Simulador de Simulações</p>
    <button id="btn-nova-simulacao">Nova Simulação</button>
    <button class="btn-disabled" title="Em breve!">Carregar Simulação</button>
    <button id="btn-toggle-theme" class="btn-secondary">Alternar Tema</button>
</div>

<!-- TELA 2: CONFIGURAÇÃO DA SIMULAÇÃO -->
<div id="setup-container" class="panel hidden">
    <h1>Configurar Nova Simulação</h1>
    <div class="setup-section">
        <h3>Cenário e Recursos</h3>
        <div class="input-group"><label for="scenario">Cenário:</label><select id="scenario"><option value="floresta">Floresta</option><option value="aquario">Aquário</option><option value="deserto">Deserto</option></select></div>
        <div class="input-group"><label for="numComida">Comida Inicial:</label><input type="number" id="numComida" value="15" min="1" max="50"></div>
        <div class="input-group"><label for="numAgua">Água Inicial:</label><input type="number" id="numAgua" value="5" min="1" max="20"></div>
    </div>
    <div class="setup-section">
        <h3>Animais Iniciais</h3>
        <div id="animal-selection"></div>
    </div>
    <button id="iniciarSimulacao">Iniciar Simulação</button>
    <button id="btn-voltar-menu" class="btn-secondary">Voltar ao Menu</button>
</div>

<!-- TELA 3: JOGO -->
<div id="game-container" class="hidden">
    <!-- NOVO WRAPPER PARA O MUNDO, PERMITE PAN & ZOOM -->
    <div id="world-viewport">
        <div id="world">
            <div id="world-overlay"></div>
            <!-- Container para as partículas de clima e efeitos -->
            <div id="particle-container"></div>
        </div>
    </div>
    
    <div id="info-panel" class="panel">
        <div class="tabs">
            <button class="tab-button active" data-tab="status">Status</button>
            <button class="tab-button" data-tab="graficos">Gráficos</button>
            <button class="tab-button" data-tab="log">Log</button>
        </div>

        <!-- Aba de Status -->
        <div id="tab-status" class="tab-content active">
            <h2>Status da Simulação</h2>
            <div class="stats-grid">
                <div class="stat-item"><span>População</span><span id="populacaoTotal">0</span></div>
                <div class="stat-item"><span>Tempo</span><span id="tempo">0s</span></div>
            </div>
            <div id="animal-counts"></div>

            <h3 class="panel-subtitle">Controle de Tempo</h3>
            <div id="time-controls" class="btn-group">
                <button class="btn-time" data-speed="0" title="Pausar"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg></button>
                <button class="btn-time" data-speed="0.5" title="Câmera Lenta"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 18l-6-6 6-6v12zM18 6l-6 6 6 6V6z"/></svg></button>
                <button class="btn-time active" data-speed="1" title="Velocidade Normal"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg></button>
                <button class="btn-time" data-speed="2" title="2x Velocidade"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg></button>
                <button class="btn-time" data-speed="5" title="5x Velocidade"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/></svg></button>
            </div>

            <h3 class="panel-subtitle">Ações Manuais</h3>
            <div class="btn-group">
                <button class="btn-interaction" id="btn-add-comida" title="Adicionar comida aleatória">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>
                    <span>Comida</span>
                </button>
                 <button class="btn-interaction" id="btn-add-rato" title="Adicionar um rato">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>
                    <span>Rato</span>
                </button>
                <button class="btn-interaction" id="btn-add-coelho" title="Adicionar um coelho">
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>
                    <span>Coelho</span>
                </button>
                <button class="btn-interaction" id="btn-colocar-pedra" title="Adicionar uma pedra">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 14H7v-4h4v4zm0-6H7V7h4v4zm6 6h-4v-4h4v4zm0-6h-4V7h4v4z"/></svg>
                    <span>Pedra</span>
                </button>
                <button class="btn-interaction" id="btn-modo-territorio" title="Mostrar/Ocultar zonas de território">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5C21.27 7.61 17 4.5 12 4.5zm0 13C8.69 17.5 6 15.01 6 12s2.69-5.5 6-5.5 6 2.49 6 5.5-2.69 5.5-6 5.5zm0-9C9.79 8.5 8 10.08 8 12s1.79 3.5 4 3.5 4-1.58 4-3.5S14.21 8.5 12 8.5z"/></svg>
                    <span>Territórios</span>
                </button>
                <button class="btn-interaction" id="btn-fullscreen" title="Tela Cheia">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                    <span>Tela Cheia</span>
                </button>
            </div>
        </div>

        <!-- Aba de Gráficos -->
        <div id="tab-graficos" class="tab-content">
            <h2>Gráfico Populacional</h2>
            <div class="chart-container">
                <canvas id="populationChart"></canvas>
            </div>
        </div>

        <!-- Aba de Log -->
        <div id="tab-log" class="tab-content">
            <h2>Log de Eventos</h2>
            <div id="log-container"></div>
        </div>
        
        <button id="resetarSimulacao" class="btn-danger">Encerrar Simulação</button>
    </div>
</div>

<!-- Script para controle das abas -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    const infoPanel = document.getElementById('info-panel');
    if (!infoPanel) return;

    infoPanel.addEventListener('click', function(e) {
        if (e.target.closest('.tab-button')) {
            const tabButton = e.target.closest('.tab-button');
            const tabId = tabButton.dataset.tab;
            
            infoPanel.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            infoPanel.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            tabButton.classList.add('active');
            document.getElementById(`tab-${tabId}`).classList.add('active');
        }
    });

    const themeToggleButton = document.getElementById('btn-toggle-theme');
    themeToggleButton.addEventListener('click', () => {
        document.body.classList.toggle('theme-light');
        document.body.classList.toggle('theme-dark');
    });
});
</script>
<script src="script.js"></script>

</body>
</html>
